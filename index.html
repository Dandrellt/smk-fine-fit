<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<title>SMK FINE & FIT CLUB</title>
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#ff5f9e">
<link rel="apple-touch-icon" href="icons/icon-192.png">
<style>
:root{--brand:#ff5f9e;--ink:#1a0f14}
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;color:var(--ink);font-family:-apple-system,system-ui,'SF Pro Text','Helvetica Neue',Helvetica,Arial,'Segoe UI',Roboto,Ubuntu,Cantarell,sans-serif;background:linear-gradient(160deg,#ffd1e6 0%,#ffb1d2 38%,#ff87b6 70%,#ff5f9e 100%)}
.hero{padding:24px 18px 10px;text-align:center;color:#fff}
.hero .circle{width:220px;height:220px;border-radius:100%;box-shadow:0 14px 40px rgba(177,21,100,.30);display:inline-flex;align-items:center;justify-content:center;overflow:hidden;background:transparent}
.hero .circle img{width:100%;height:100%;object-fit:contain}
.hero h1{margin:14px 0 4px 0;font-family:'Didot','Bodoni 72',Georgia,serif;font-size:34px;letter-spacing:.3px}
.tagline{opacity:.95;font-size:14px;letter-spacing:.3px}
.welcome{margin-top:6px;background:rgba(255,255,255,.25);display:inline-block;padding:6px 12px;border-radius:999px;font-weight:600;box-shadow:0 6px 24px rgba(177,21,100,.18)}
.nav{display:flex;gap:10px;padding:12px 14px;position:sticky;top:0;z-index:9;backdrop-filter:blur(8px)}
.tab{flex:1;padding:10px 12px;border-radius:999px;border:1px solid rgba(255,255,255,.65);background:rgba(255,255,255,.4);color:#5b1c3a;font-weight:600}
.tab.active{background:#fff;color:#b11564;border-color:#fff;box-shadow:0 6px 20px rgba(177,21,100,.18)}
.container{padding:16px}
.card{background:rgba(255,255,255,.92);border:1px solid #f2d2e4;border-radius:16px;padding:14px;margin:12px 0;box-shadow:0 8px 30px rgba(177,21,100,.10)}
h2,h3{font-family:'Didot','Bodoni 72',Georgia,serif;margin:0 0 8px 0}
table{width:100%;border-collapse:collapse;font-size:14px}
th,td{padding:10px 8px;border-bottom:1px solid #f2e0ea;text-align:left;vertical-align:top}
.btn{display:inline-block;padding:10px 14px;border-radius:12px;border:1px solid #b11564;background:#b11564;color:#fff;text-decoration:none;box-shadow:0 4px 16px rgba(177,21,100,.18);cursor:pointer}
.btn.ghost{background:transparent;color:#b11564;border-color:#b11564}
.grid{display:grid;gap:10px;grid-template-columns:repeat(2,1fr)}
.timer{font:700 28px/1 ui-monospace,'SF Mono',Menlo,Consolas,monospace}
.small{color:#7b4259;font-size:12px}
.view{display:none}
.hidden{display:none}
</style>
</head>
<body>
<div class="hero">
  <div class="circle" id="heroCircle">
    <img id="heroImg" src="assets/hero-logo.png" alt="SMK FINE & FIT CLUB logo">
  </div>
  <div style="margin-top:10px">
    <label class="btn ghost" for="heroUpload">Upload Photo</label>
    <button id="resetHero" class="btn ghost">Reset</button>
    <input id="heroUpload" class="hidden" type="file" accept="image/*">
  </div>
  <h1>SMK FINE & FIT CLUB</h1>
  <div class="tagline">Curves. Confidence. Control.</div>
  <div class="welcome">Welcome, Shaquan ðŸ‘‘</div>
</div>

<div class="nav">
  <button id="tabWorkouts" class="tab active">Workouts</button>
  <button id="tabMeals" class="tab">Meals</button>
  <button id="tabTimer" class="tab">Timer</button>
  <button id="tabProgress" class="tab">Progress</button>
</div>

<div class="container">
  <div id="viewWorkouts" class="view" style="display:block"></div>
  <div id="viewMeals" class="view"></div>
  <div id="viewTimer" class="view"></div>
  <div id="viewProgress" class="view"></div>
</div>

<script>
if('serviceWorker' in navigator){window.addEventListener('load',()=>navigator.serviceWorker.register('service-worker.js'));}

function show(id){document.querySelectorAll('.tab').forEach(b=>b.classList.remove('active'));
document.querySelectorAll('.view').forEach(v=>v.style.display='none');
document.getElementById('tab'+id).classList.add('active');
document.getElementById('view'+id).style.display='block';location.hash=id.toLowerCase();}
['Workouts','Meals','Timer','Progress'].forEach(id=>document.getElementById('tab'+id).onclick=()=>show(id));
if(location.hash){const h=location.hash.slice(1);const cap=h.charAt(0).toUpperCase()+h.slice(1); if(document.getElementById('tab'+cap)) show(cap);}

// Hero upload
const heroImg = document.getElementById('heroImg');
const heroUpload = document.getElementById('heroUpload');
const resetHero = document.getElementById('resetHero');
const LOCAL_KEY = 'smk-hero-photo';
const saved = localStorage.getItem(LOCAL_KEY); if(saved){ heroImg.src = saved; }
heroUpload.addEventListener('change', (e)=>{
  const f = e.target.files && e.target.files[0]; if(!f) return;
  const r = new FileReader(); r.onload = () => { heroImg.src = r.result; localStorage.setItem(LOCAL_KEY, r.result); }; r.readAsDataURL(f);
});
resetHero.onclick = ()=>{ localStorage.removeItem(LOCAL_KEY); heroImg.src='assets/hero-logo.png'; heroUpload.value=''; };

// Helpers
async function j(p){const r=await fetch(p); return await r.json();}

// Workouts
function workoutsUI(data){
  const root=document.getElementById('viewWorkouts'); root.innerHTML='';
  const tip=document.createElement('div'); tip.className='card';
  tip.innerHTML='<b>8â€‘Week Program</b><div class="small">Tap a day to expand. Videos open in YouTube.</div>';
  root.appendChild(tip);
  data.weeks.forEach((w)=>{
    const sec=document.createElement('section'); sec.className='card';
    const h=document.createElement('h3'); h.textContent=w.label; sec.appendChild(h);
    w.days.forEach((d)=>{
      const btn=document.createElement('button'); btn.className='btn ghost'; btn.style.width='100%'; btn.textContent=d.name; sec.appendChild(btn);
      const box=document.createElement('div'); box.style.display='none'; box.style.marginTop='10px';
      const tbl=document.createElement('table'); tbl.innerHTML='<thead><tr><th style="width:34%">Workout</th><th>Sets</th><th>Reps</th><th>Cal</th><th>Int</th><th>Video</th></tr></thead>';
      const tb=document.createElement('tbody');
      d.exercises.forEach((ex)=>{
        const tr=document.createElement('tr');
        tr.innerHTML = `<td>${ex.exercise}<br><span class='small'>${ex.cue||''}</span></td>
                        <td>${ex.sets||''}</td><td>${ex.reps||''}</td><td>${ex.calories||''}</td>
                        <td>${ex.intensity||''}</td>
                        <td>${ex.link?`<a target='_blank' href='${ex.link}'>Watch â–¶ï¸Ž</a>`:''}</td>`;
        tb.appendChild(tr);
      });
      tbl.appendChild(tb); box.appendChild(tbl); sec.appendChild(box);
      btn.onclick=()=>{box.style.display = box.style.display==='none' ? 'block' : 'none';};
    });
    root.appendChild(sec);
  });
}

// Meals
function mealsUI(meals){
  const root=document.getElementById('viewMeals'); root.innerHTML='';
  meals.days.forEach((d)=>{
    const sec=document.createElement('section'); sec.className='card';
    sec.innerHTML=`<h3>${d.day}</h3>`;
    const tbl=document.createElement('table'); tbl.innerHTML='<thead><tr><th>Meal</th><th>What</th><th>Approx cals</th></tr></thead>';
    const b=document.createElement('tbody');
    d.items.forEach((it)=>{
      const tr=document.createElement('tr');
      tr.innerHTML=`<td>${it.name}</td><td>${it.what}</td><td>${it.kcal}</td>`;
      b.appendChild(tr);
    });
    tbl.appendChild(b); sec.appendChild(tbl); root.appendChild(sec);
  });
}

// Timer
function timerUI(){
  const root=document.getElementById('viewTimer'); root.innerHTML='';
  const sw=document.createElement('div'); sw.className='card';
  sw.innerHTML=`<h3>Stopwatch</h3><div id='swTime' class='timer'>00:00:00</div>
  <div class='grid'><a class='btn' id='swStart'>Start</a><a class='btn' id='swPause'>Pause</a><a class='btn ghost' id='swReset'>Reset</a></div>`;
  root.appendChild(sw);
  let run=false,start=0,acc=0,timer=null;
  const fmt=(t)=>{const s=Math.floor(t)%60,m=Math.floor(t/60)%60,h=Math.floor(t/3600);return String(h).padStart(2,'0')+':'+String(m).padStart(2,'0')+':'+String(s).padStart(2,'0');};
  const upd=()=>{document.getElementById('swTime').textContent=fmt(acc+(run?(Date.now()-start)/1000:0));};
  document.getElementById('swStart').onclick=()=>{if(!run){run=true;start=Date.now();timer=setInterval(upd,200);}};
  document.getElementById('swPause').onclick=()=>{if(run){acc+=((Date.now()-start)/1000);run=false;clearInterval(timer);upd();}};
  document.getElementById('swReset').onclick=()=>{acc=0;run=false;clearInterval(timer);upd();};
  upd();

  const cd=document.createElement('div'); cd.className='card';
  cd.innerHTML=`<h3>Countdown</h3><div id='cdTime' class='timer'>00:45:00</div>
  <div class='grid'><a class='btn' data-min='45'>45 min</a><a class='btn' data-min='30'>30 min</a><a class='btn' data-min='20'>20 min</a>
  <input id='cdCustom' type='number' placeholder='Custom minutes' style='padding:10px;border:1px solid #b11564;border-radius:12px;background:#fff;color:#b11564;'>
  <a class='btn' id='cdStart'>Start</a><a class='btn ghost' id='cdStop'>Stop</a></div>`;
  root.appendChild(cd);
  let remain=45*60,t=null;
  const f=(t)=>{const s=Math.max(0,Math.floor(t)%60),m=Math.max(0,Math.floor(t/60)%60),h=Math.max(0,Math.floor(t/3600));return String(h).padStart(2,'0')+':'+String(m).padStart(2,'0')+':'+String(s).padStart(2,'0');};
  const u=()=>{document.getElementById('cdTime').textContent=f(remain);}; u();
  cd.querySelectorAll('a[data-min]').forEach(b=>b.onclick=()=>{remain=parseInt(b.getAttribute('data-min'))*60;u();});
  document.getElementById('cdStart').onclick=()=>{clearInterval(t);t=setInterval(()=>{remain--;u();if(remain<=0){clearInterval(t);alert('Timer complete! ðŸ‘‘');}},1000);};
  document.getElementById('cdStop').onclick=()=>{clearInterval(t);};
  document.getElementById('cdCustom').onchange=(e)=>{const v=parseInt(e.target.value||'0'); if(v>0){remain=v*60; u();}};
}

// Progress
function progressUI(){
  const root=document.getElementById('viewProgress'); root.innerHTML='';
  const sec=document.createElement('section'); sec.className='card';
  sec.innerHTML=`<h3>Metrics</h3>
  <div class='grid'>
    <div><div class='small'>Waist (in)</div><input id='mWaist' type='number' step='0.1' style='padding:10px;border:1px solid #b11564;border-radius:12px;'></div>
    <div><div class='small'>Hips (in)</div><input id='mHips' type='number' step='0.1' style='padding:10px;border:1px solid #b11564;border-radius:12px;'></div>
    <div><div class='small'>Weight (lb)</div><input id='mWeight' type='number' step='0.1' style='padding:10px;border:1px solid #b11564;border-radius:12px;'></div>
    <div><div class='small'>Energy (1â€‘10)</div><input id='mEnergy' type='number' min='1' max='10' style='padding:10px;border:1px solid #b11564;border-radius:12px;'></div>
  </div><br><a class='btn' id='saveProg'>Save</a> <span class='small' id='saveMsg'></span>`;
  root.appendChild(sec);
  const load=()=>['Waist','Hips','Weight','Energy'].forEach(k=>{const v=localStorage.getItem('smk-'+k.toLowerCase()); if(v) document.getElementById('m'+k).value=v;});
  const save=()=>{['Waist','Hips','Weight','Energy'].forEach(k=>localStorage.setItem('smk-'+k.toLowerCase(), document.getElementById('m'+k).value)); document.getElementById('saveMsg').textContent='Saved âœ”'; setTimeout(()=>document.getElementById('saveMsg').textContent='',2000);};
  document.getElementById('saveProg').onclick=save; load();
}

async function init(){
  const plan = await j('plan-data.json'); workoutsUI(plan);
  const meals = await j('meals-data.json'); mealsUI(meals);
  timerUI(); progressUI();
}
init();
</script>
</body>
</html>
